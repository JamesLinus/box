<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Function Reference - Box - Flexible Docker Builder</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Function Reference";
    var mkdocs_page_input_path = "functions.md";
    var mkdocs_page_url = "/functions/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Box - Flexible Docker Builder</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Introduction</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../verbs/">Verb Reference</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Function Reference</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#getenv">getenv</a></li>
                
            
                <li class="toctree-l3"><a href="#read">read</a></li>
                
            
                <li class="toctree-l3"><a href="#getuid">getuid</a></li>
                
            
                <li class="toctree-l3"><a href="#getgid">getgid</a></li>
                
            
            </ul>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Box - Flexible Docker Builder</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Function Reference</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/erikh/box" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>Functions in Box provide a data-passing mechanism for build instructions. For
example, you may wish to read the contents of a file from the container into
your build for further processing; the <code>read</code> function allows that.</p>
<p>These are the functions supported by Box.</p>
<h2 id="getenv">getenv</h2>
<p>getenv retrieves a value from the building environment (passed in as string)
and returns a string with the value. If no value exists, an empty string is
returned.</p>
<p>Example:</p>
<pre><code class="ruby"># If you set IMAGE=ceph/rbd:latest in your environment, that would be pulled
# via the `from` statement.
from getenv(&quot;IMAGE&quot;)
</code></pre>

<h2 id="read">read</h2>
<p>read takes a filename as string, reads it from the latest image in the
evaluation and returns its data. Yields an error if the file does not exist
or from has not been called.</p>
<p>read returns a string which may then be manipulated with normal string
manipulations in ruby.</p>
<p>Example:</p>
<pre><code class="ruby">from &quot;debian&quot;
# this gets the first username in your passwd file inside the debian image
user read(&quot;/etc/passwd&quot;).split(&quot;\n&quot;).first.split(&quot;:&quot;)[0]
</code></pre>

<h2 id="getuid">getuid</h2>
<p>getuid, given a string username provides an integer response with the UID of
the user. This works by reading the /etc/passwd file in the image.</p>
<p>Yields an error if it cannot find the user or from has not been called.</p>
<p>Example:</p>
<pre><code class="ruby">from &quot;debian&quot;
run &quot;gpasswd -aG docker #{getuid(&quot;erikh&quot;)}&quot;
</code></pre>

<h2 id="getgid">getgid</h2>
<p>getgid, given a string group name provides an integer response with the GID
of the group. This works by reading the /etc/group file in the image.</p>
<p>Yields an error if it cannot find the group or from has not been called.</p>
<p>Example:</p>
<pre><code class="ruby">from &quot;debian&quot;
run &quot;usermod -G #{getgid(&quot;docker&quot;)} erikh&quot;
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../verbs/" class="btn btn-neutral" title="Verb Reference"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/erikh/box" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../verbs/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
    </span>
</div>

</body>
</html>
